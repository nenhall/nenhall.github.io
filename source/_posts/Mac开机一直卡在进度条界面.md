---
title: Mac开机一直卡在进度条界面
catalog: true
date: 2018-08-29 17:14:40
subtitle:
header-img: note_head_img.jpg
catagories:
  - MacOS
tags:
  - 电脑常识
---
### 现象：
>早上一开机，就一直卡在进度条界面，进度条满了后就一直停在当前界面了！网上各种搜各种都没解决，折腾了一上午；我遇到两次都这样解决的，第一次的时候折腾了一上午，第二次直接按这流程5分钟解决了，不需要重装系统，在此记录下来也是希望能帮助到更多的同仁。


### 原因
> 造成问题的可能原因：没有正确关机，或者说没有正常关机(不知你是否遇到过执行关机后，电脑一直处于在关机状态，10几分钟还是未能关上)，一般发生在重装系统后几天

### 解决方案
> 最后在某外国网站上有人说是mac硬盘记忆存储的问题，需要清除记忆存储的数据库，这么一说，突然感觉好像是这样一回事，于是果断的尝试下，我也是第一次试这方法，所以在试这种方法之前还是先把电脑内的重要资料做备份：

***下面的第三、四步你可以选择接性跳过，我第一次用这种方法的时候不确定可不可行，所以增加了这两步来保险起见，第二次遇到这问题的时候我是直接跳过的***
1. 开机后立即按住`command + R`键进入恢复模式；
2. 然后选择`磁盘工具`；
3. 准备一个硬盘或者U盘，通过硬盘工具将你的硬盘或者U盘格式化成mac-日志格式，如果你的U盘本身能直接读书，可以不用格式化；
4. 通过`磁盘工具`将你电脑的资料备份到你的移动盘：
    * 首先新建文件夹映像，如下图1
    * 选择你想备份的文件或者文件夹
    * 更改保存的位置：即你的移动磁盘，如下图2
    * 然后点击存储：等待它完成，这个还是有点慢的，跟你的电脑和磁盘、文件大小有关
    *  备份完成后，你可以把移动盘插到别的电脑上去看下，是否完全成功(非必要操作，毕竟数据无价，确认下比较安全)，确认无误后继续往下操作；

  ![备份资料新建映像](https://upload-images.jianshu.io/upload_images/2443108-4b5ac036e1d6eb8a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/500)
  ![备份资料选择保存位置](https://upload-images.jianshu.io/upload_images/2443108-5c517d9046bbf546.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/500)

5. 关机 > 再开机 > 立即按`command + V`键，进入代码界面：
    * 等不停的输出`Too many corpses being created`这段代码的时候,说明是缓存太多造成的，如下图：
    ![0A50DF09064F100993F87B4FD480D1D5.jpg](https://upload-images.jianshu.io/upload_images/2443108-09c6f8d3b70b2412.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/300)
    * 不必要一直看这个输出，知道是这个原因就可以了。
6.  关机 > 再开机 > 立即按`command + R`键，进入macOS恢复界面，左上角找到终端工具，在终端命令行中按如下顺序执行命令(目的：清除数据库缓存)：
     * 进入缓存目录
     ```
     cd /Volumes/Macintosh\ HD/var/db/caches/opendiretory/
     ```

     * 删除缓存数据库
     ```
     mv ./mbr_cache ./mbr_cache-old
     ```
     > 如果进入缓存目录的时候，提示`opendiretory `目录找不到，是因为**<El Capitan后加入了Rootless(SIP)机制>**需要先关闭SIP：
     > 1. 关闭SIP，具体关闭步骤参考我另一遍文章有写：[Mac ZSH 好用的插件](https://www.jianshu.com/p/b49544030019)；
     > 2. 关闭后再回到第6步开始往下继续执行相关操作；


7. 完成上面操作后：关机 > 再开机 > 进入正常开机流程
这次开机会比正常情况下要久，因为缓存清了，大概3-5分钟；

8. 成功进入用户登录界面，恭喜你！！

**如果你因某种原因无法成功执行第六步，又急着用电脑，建议按上面的步骤备份重要资料，然后进入在线重装系统步骤……也可邮箱联系我nenhall@126.com**

##### 如果备份完后，你还是想要重装系统也可以，那执行完第4步后，不要执行第5步以后的命令了，执行如下操作重装系统：
1. 把你电脑的磁盘(Macintosh HD)格式抹除了
![磁盘抹除](https://upload-images.jianshu.io/upload_images/2443108-1c308f7a88c56c9e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/500)
2. 退出磁盘；
3. 连接上网络，然后选择在线安装mac0x
9. 进入在线安装过程，至此问题解决；

<br>

### 附 几条mac其它命令的释义：
**都是开机后需要立即执行的组合操作的**

##### option + command + R + P
> 屏幕会三闪,是NVRem, 作用是重置系统,缓存重置,解决系统卡顿的问题.

##### command + R
> 这个是macOS实用工具,包括时间机器,修复磁盘(Macintosh HD急救),安装系统, 操作终端等功能.

##### shift
> 这个是安全模式(目前我还没有进去看过)

##### D
> 这个功能是硬件自检,启动会自动检测硬件是否有问题.

##### command + shift + option + R 或者 command + option + R
> 这个作用是强制装系统,彻底的重装系统,属于抹除安装(意思是你的Macintosh HD盘上的所有资料都会被清除)

*第二次更新此文章增加了图片及SIP权限开启的方法；因为我的电脑之前开启过，所以没遇到这问题*